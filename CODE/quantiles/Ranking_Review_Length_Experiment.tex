% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={Review Text Length and Ratings Experiment},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi

\title{Review Text Length and Ratings Experiment}
\author{}
\date{\vspace{-2.5em}}

\begin{document}
\maketitle

Team BoxCoxRox (Team 17): N. Abramson, M. Kunnen, K. Matisko, K.
McCanless, M. Porter and S. Tay

\hypertarget{introduction}{%
\section{Introduction}\label{introduction}}

The purpose of this notebook will be to explore the relationship between
the length of reviews, and the number of stars given in a review. If
there appears to be a positive correlation, then it may make sense to
use review length as a ``tie breaker'' when it comes to determinig the
absolute raking of products based on user ``stars.''

For statistical purposes, we will begin with the following null
hypothesis, and hope to reject it.

H\_o: Higher product ratings (stars) are not correlated with the length
of review text.

The following code will load the necessary libraries and the data:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'dplyr'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:stats':
## 
##     filter, lag
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## -- Attaching packages --------------------------------------- tidyverse 1.3.0 --
\end{verbatim}

\begin{verbatim}
## v ggplot2 3.3.3     v purrr   0.3.4
## v tibble  3.1.0     v stringr 1.4.0
## v tidyr   1.1.3     v forcats 0.5.1
## v readr   1.4.0
\end{verbatim}

\begin{verbatim}
## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{=} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}ranking\_output.csv\textquotesingle{}}\NormalTok{)}
\FunctionTok{summary}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      index                asin        overall_average overall_count     
##  Min.   :     0   061539972X:     1   Min.   :1.000   Min.   :    1.00  
##  1st Qu.: 49600   0615553605:     1   1st Qu.:3.500   1st Qu.:    1.00  
##  Median : 99200   0760339597:     1   Median :4.286   Median :    3.00  
##  Mean   : 99200   0793816793:     1   Mean   :4.010   Mean   :   32.98  
##  3rd Qu.:148801   0972585419:     1   3rd Qu.:5.000   3rd Qu.:   10.00  
##  Max.   :198401   0975412868:     1   Max.   :5.000   Max.   :26994.00  
##                   (Other)   :198396                                     
##  overall_stdev    average_length_of_review_text      rank       
##  Min.   :0.0000   Min.   :   1.00               Min.   :     0  
##  1st Qu.:0.0000   1st Qu.:  18.50               1st Qu.: 49600  
##  Median :0.5000   Median :  31.61               Median : 99200  
##  Mean   :0.6733   Mean   :  40.89               Mean   : 99200  
##  3rd Qu.:1.3074   3rd Qu.:  50.62               3rd Qu.:148801  
##  Max.   :2.0000   Max.   :1803.00               Max.   :198401  
##                                                                 
##    percentile     
##  Min.   :5.0e-06  
##  1st Qu.:2.5e-01  
##  Median :5.0e-01  
##  Mean   :5.0e-01  
##  3rd Qu.:7.5e-01  
##  Max.   :1.0e+00  
## 
\end{verbatim}

\hypertarget{method}{%
\section{Method}\label{method}}

In order to increase the number of valid reviews, the following code
will limit test dataset to just those reviews that are verified and have
a length betwenn 18 and 50 (the middle 50\% of the data) characters.
Histograms are displayed to give an idea of the distribution of the
length of review text as well as the number of stars given as part of
reviews.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{average\_length\_of\_review\_text}\SpecialCharTok{\textgreater{}}\DecValTok{18}\NormalTok{)}
\NormalTok{df }\OtherTok{\textless{}{-}}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{average\_length\_of\_review\_text}\SpecialCharTok{\textless{}}\DecValTok{50}\NormalTok{)}
\NormalTok{df }\OtherTok{\textless{}{-}}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{overall\_count}\SpecialCharTok{\textgreater{}}\DecValTok{2}\NormalTok{)}
\FunctionTok{hist}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{average\_length\_of\_review\_text)}
\end{Highlighting}
\end{Shaded}

\includegraphics{Ranking_Review_Length_Experiment_files/figure-latex/unnamed-chunk-2-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{hist}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{overall\_average)}
\end{Highlighting}
\end{Shaded}

\includegraphics{Ranking_Review_Length_Experiment_files/figure-latex/unnamed-chunk-2-2.pdf}

Again, the goal of this experiment is to see if there is a strong
correlation between product average ranking and average review length.
To see if there is a relationship, we now graph a random sample of 10000
products. For each product we will plot the product average ranking vs
average review length. For this experiment, our dependent variable is
average product ranking (y), and the independent variable (x) is average
overall review length.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df\_sample }\OtherTok{\textless{}{-}} \FunctionTok{sample\_n}\NormalTok{(df, }\DecValTok{10000}\NormalTok{)}
\FunctionTok{plot}\NormalTok{(df\_sample}\SpecialCharTok{$}\NormalTok{average\_length\_of\_review\_text, df\_sample}\SpecialCharTok{$}\NormalTok{overall\_average)}
\NormalTok{reg }\OtherTok{=} \FunctionTok{lm}\NormalTok{(overall\_average}\SpecialCharTok{\textasciitilde{}}\NormalTok{average\_length\_of\_review\_text, }\AttributeTok{data=}\NormalTok{df\_sample)}
\FunctionTok{abline}\NormalTok{(reg, }\AttributeTok{col=}\StringTok{\textquotesingle{}Red\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{Ranking_Review_Length_Experiment_files/figure-latex/unnamed-chunk-3-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(reg)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = overall_average ~ average_length_of_review_text, 
##     data = df_sample)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.1328 -0.3733  0.1447  0.5197  1.0277 
## 
## Coefficients:
##                                 Estimate Std. Error t value Pr(>|t|)    
## (Intercept)                    4.2344613  0.0276398 153.201  < 2e-16 ***
## average_length_of_review_text -0.0052580  0.0008147  -6.454 1.14e-10 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.7115 on 9998 degrees of freedom
## Multiple R-squared:  0.004149,   Adjusted R-squared:  0.00405 
## F-statistic: 41.66 on 1 and 9998 DF,  p-value: 1.138e-10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{par}\NormalTok{(}\AttributeTok{mfrow=}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{,}\DecValTok{2}\NormalTok{))}
\FunctionTok{plot}\NormalTok{(reg)}
\end{Highlighting}
\end{Shaded}

\includegraphics{Ranking_Review_Length_Experiment_files/figure-latex/unnamed-chunk-3-2.pdf}

\hypertarget{results}{%
\section{Results}\label{results}}

As can be seen in the graph and summary above, not only is the R-Squared
value of this data extremely low, the coefficient of
average\_length\_of\_review\_text, while statistically significant with
a P value of 0.001, is actually negative! We would expect this to be
positive.

In this case, we have shown that while the review text length and the
number of stars are correlated, they are NOT positively correlated.

In other words, we have failed to show that higher mean review text
length is associated with consistenly higher ratings.

\end{document}
